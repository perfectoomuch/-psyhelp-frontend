import{S as B}from"./specialist.service-qSnSWgrU.js";import{x as T,y as F,z as R,A as N,B as P}from"./utils-1WIqXIgU.js";import{u as E}from"./upload.service-DptYWcLn.js";import{_ as A,c as d,o as i,f as t,e as v,k as f,j as b,a5 as G,g as c,b as n,r as p,O as g,R as O,w as o,F as y,i as w,t as _,a2 as H}from"./index-CQO-ZVad.js";import{_ as J,a as K,b as Q,c as W,d as X,e as Y,f as Z}from"./SelectValue.vue_vue_type_script_setup_true_lang-B9I00Usj.js";import{_ as ee,a as se,b as te,c as le,d as ie,e as ne}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Coq8QQCr.js";import{c as oe,a as r,b as D}from"./index.esm-C44VYQg6.js";const re={components:{Select:Z,SelectContent:Y,SelectGroup:X,SelectItem:W,SelectLabel:Q,SelectTrigger:K,SelectValue:J,DropdownMenu:ne,DropdownMenuContent:ie,DropdownMenuItem:le,DropdownMenuLabel:te,DropdownMenuSeparator:se,DropdownMenuTrigger:ee},data:()=>({specialistService:new B,loading:!1,item:{first_name:"",last_name:"",email:"",methods:[],experience_route:[],experience_years:"",photo:"",video:"",gender:"",birth_year:"",price:"",message:"",education:"",profession:[],sessions:"",religion:null,experience_ethnic_group:""},gender:P,profession:N,route:R,religion:F,ethnic:T,saveLoading:!1}),computed:{genderList(){return this.gender().list},routeList(){return this.route().list},routeSelected(){return this.item.experience_route.map(s=>this.route(s).getRouteByValue.name).join(", ")},professionList(){return this.profession().list},professionSelected(){return this.item.profession.map(s=>this.profession(s).getProfessionByValue.name).join(", ")},religionList(){return this.religion().list},ethnicList(){return this.ethnic().list},methodStore(){return H()},methods(){return this.methodStore.methods},methodsSelected(){return this.item.methods.map(s=>this.methodStore.getMethod(s).name)}},methods:{pushRoute(s){if(this.item.experience_route.includes(s)){const e=this.item.experience_route.findIndex(u=>u===s);this.item.experience_route.splice(e,1)}else this.item.experience_route.push(s)},pushMethod(s){if(this.item.methods.includes(s)){const e=this.item.methods.findIndex(u=>u===s);this.item.methods.splice(e,1)}else this.item.methods.push(s)},pushProfession(s){if(this.item.profession.includes(s)){const e=this.item.profession.findIndex(u=>u===s);this.item.profession.splice(e,1)}else this.item.profession.push(s)},async onChangeFile(s,e){const u=s.target.files[0],k=await E(u);this.item[e]=k},async modelCheck(s){const e=oe({first_name:r().required("Имя обязателен"),last_name:r().required("Фамилия обязателен"),email:r().email().required("Фамилия обязателен"),methods:D().of(r().required()).min(1,"Укажите хотя бы один метод"),experience_route:D().of(r().required()).min(1,"Укажите хотя бы одно направление"),experience_years:r().required("Опыт работы обязателен"),photo:r().required("Загрузите фотографию"),video:r(),gender:r().required("Выберите пол специалиста"),birth_year:r().required("Год рождения обязателен"),price:r().required("Стоимость сессии обязателен"),message:r().required("Сообщение визитка обязателен"),education:r().required("Образование обязателен"),profession:D().of(r().required()).min(1,"Укажите хотя бы одну профессию"),sessions:r().required("Сессии обязателен"),experience_ethnic_group:r().required("Опыт с эт. группами обязателен")});try{let u=await e.validate(s,{abortEarly:!1});return!0}catch(u){return u.errors.map(k=>this.$toast.error(k)),!1}},async onCreate(){if(!await this.modelCheck(this.item))return;this.loading=!0;const e=await this.specialistService.create(this.item);this.$router.push(`/admin/dashboard/specialists/${e}`)}}},ae={class:"flex justify-between"},de=["disabled"],ue={class:"loading loading-spinner text-primary"},me={key:0,class:"flex justify-center"},pe={key:1,class:"grid grid-cols-2 gap-4"},fe={class:"flex flex-col gap-4"},be={class:"grid grid-cols-2 gap-4"},ce=["src"],ge={key:1,class:"w-full h-[250px] flex flex-col items-center justify-center bg-gray-100 rounded-lg"},he={key:3,class:"w-full h-[250px] flex flex-col items-center justify-center bg-gray-100 rounded-lg"},ye={class:"col-span-2 flex flex-col gap-4"},we={class:"fieldset bg-base-200 border-base-300 rounded-box border p-4"},_e={class:"flex flex-col gap-4"},ve={class:"fieldset bg-base-200 border-base-300 rounded-box border p-4 -mt-[17px]"},ke={class:"fieldset bg-base-200 border-base-300 rounded-box border p-4 -mt-[17px]"},Se={class:"flex gap-2"},xe=["value"],Ce={class:"flex gap-2"},Ve=["value"],qe={class:"flex justify-between gap-2"},De={class:"flex flex-col"};function Me(s,e,u,k,Ie,a){const h=p("Icon"),z=p("video-player"),M=p("SelectValue"),I=p("SelectTrigger"),L=p("SelectItem"),$=p("SelectContent"),j=p("Select"),S=p("DropdownMenuTrigger"),x=p("DropdownMenuItem"),C=p("DropdownMenuContent"),V=p("DropdownMenu"),q=O("maska");return i(),d(y,null,[t("div",ae,[e[15]||(e[15]=t("div",{class:"flex flex-col mb-10"},[t("h1",{class:"text-2xl font-semibold"},"Добавить специалиста")],-1)),t("button",{class:"btn",onClick:e[0]||(e[0]=(...l)=>a.onCreate&&a.onCreate(...l)),disabled:s.loading},[f(t("span",ue,null,512),[[G,s.loading]]),e[14]||(e[14]=b(" Добавить "))],8,de)]),s.loading&&s.item===null?(i(),d("div",me,e[16]||(e[16]=[t("span",{class:"loading loading-spinner text-primary"},null,-1)]))):v("",!0),!s.loading&&s.item!==null?(i(),d("div",pe,[t("div",fe,[t("div",be,[s.item.photo?(i(),d("img",{key:0,class:"w-full h-[250px] object-cover",src:s.$file(s.item.photo)},null,8,ce)):(i(),d("div",ge,[n(h,{name:"Image",size:20,class:"opacity-65"})])),s.item.video?(i(),c(z,{key:2,src:s.$file(s.item.video),loop:!1,volume:1,controls:!0,aspectRatio:"16:9",class:"min-h-[250px]"},null,8,["src"])):(i(),d("div",he,[n(h,{name:"Video",size:20,class:"opacity-65"})]))]),t("div",ye,[t("fieldset",we,[e[17]||(e[17]=t("legend",{class:"fieldset-legend"},"Медиа",-1)),e[18]||(e[18]=t("label",{class:"label"},"Фотография профиля",-1)),t("input",{class:"file-input file-input-ghost file-input-sm border border-white bg-white overflow-hidden w-full",type:"file",accept:"image/*",onChange:e[1]||(e[1]=l=>a.onChangeFile(l,"photo"))},null,32),e[19]||(e[19]=t("label",{class:"label"},"Видео-визитка",-1)),t("input",{class:"file-input file-input-ghost file-input-sm border border-white bg-white overflow-hidden w-full",type:"file",onChange:e[2]||(e[2]=l=>a.onChangeFile(l,"video"))},null,32)])])]),t("div",_e,[t("fieldset",ve,[e[20]||(e[20]=t("legend",{class:"fieldset-legend"},"Персональные данные",-1)),e[21]||(e[21]=t("label",{class:"label"},"Имя",-1)),f(t("input",{class:"input border","onUpdate:modelValue":e[3]||(e[3]=l=>s.item.first_name=l),required:""},null,512),[[g,s.item.first_name]]),e[22]||(e[22]=t("label",{class:"label"},"Фамилия",-1)),f(t("input",{class:"input border","onUpdate:modelValue":e[4]||(e[4]=l=>s.item.last_name=l),required:""},null,512),[[g,s.item.last_name]]),e[23]||(e[23]=t("label",{class:"label"},"Год рождения",-1)),f(t("input",{class:"input border","onUpdate:modelValue":e[5]||(e[5]=l=>s.item.birth_year=l),required:""},null,512),[[q,"####"],[g,s.item.birth_year]]),e[24]||(e[24]=t("label",{class:"label"},"Почта",-1)),f(t("input",{class:"input border","onUpdate:modelValue":e[6]||(e[6]=l=>s.item.email=l),required:""},null,512),[[g,s.item.email]]),e[25]||(e[25]=t("label",{class:"label"},"Гендер",-1)),n(j,{modelValue:s.item.gender,"onUpdate:modelValue":e[7]||(e[7]=l=>s.item.gender=l)},{default:o(()=>[n(I,{class:"bg-white border-none shadow-none w-full"},{default:o(()=>[n(M,{placeholder:"Выбрать"})]),_:1}),n($,{class:"bg-white border-gray-200 max-h-[400px]"},{default:o(()=>[(i(!0),d(y,null,w(a.genderList,(l,m)=>(i(),c(L,{key:m,value:l.value},{default:o(()=>[b(_(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),t("fieldset",ke,[e[29]||(e[29]=t("legend",{class:"fieldset-legend"},"Проф. профиль",-1)),e[30]||(e[30]=t("label",{class:"label"},"Стоимость сессии",-1)),f(t("input",{class:"input border","onUpdate:modelValue":e[8]||(e[8]=l=>s.item.price=l),required:""},null,512),[[g,s.item.price],[q,"###########"]]),e[31]||(e[31]=t("label",{class:"label"},"Опыт работы в годах",-1)),f(t("input",{class:"input border","onUpdate:modelValue":e[9]||(e[9]=l=>s.item.experience_years=l),"data-maska":"0.99","data-maska-tokens":"0:\\d:multiple|9:\\d:optional",required:""},null,512),[[g,s.item.experience_years],[q]]),e[32]||(e[32]=t("label",{class:"label"},"Направлении",-1)),t("div",Se,[t("input",{class:"input border",value:a.routeSelected,readonly:""},null,8,xe),n(V,null,{default:o(()=>[n(S,{class:"btn btn-sm h-full btn-secondary"},{default:o(()=>[e[26]||(e[26]=b(" Выбрать ")),n(h,{name:"ChevronDown",size:14})]),_:1,__:[26]}),n(C,{class:"bg-white",side:"bottom",align:"end"},{default:o(()=>[(i(!0),d(y,null,w(a.routeList,(l,m)=>(i(),c(x,{key:m,class:"flex items-center justify-between",onClick:U=>a.pushRoute(l.value)},{default:o(()=>[b(_(l.name)+" ",1),s.item.experience_route.includes(l.value)?(i(),c(h,{key:0,name:"Check",size:14})):v("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),e[33]||(e[33]=t("label",{class:"label"},"Профессия",-1)),t("div",Ce,[t("input",{class:"input border",value:a.professionSelected,readonly:""},null,8,Ve),n(V,null,{default:o(()=>[n(S,{class:"btn btn-sm h-full btn-secondary"},{default:o(()=>[e[27]||(e[27]=b(" Выбрать ")),n(h,{name:"ChevronDown",size:14})]),_:1,__:[27]}),n(C,{class:"bg-white",side:"bottom",align:"end"},{default:o(()=>[(i(!0),d(y,null,w(a.professionList,(l,m)=>(i(),c(x,{key:m,class:"flex items-center justify-between",onClick:U=>a.pushProfession(l.value)},{default:o(()=>[b(_(l.name)+" ",1),s.item.profession.includes(l.value)?(i(),c(h,{key:0,name:"Check",size:14})):v("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),e[34]||(e[34]=t("label",{class:"label"},"Образование",-1)),f(t("input",{class:"input border","onUpdate:modelValue":e[10]||(e[10]=l=>s.item.education=l),required:""},null,512),[[g,s.item.education]]),e[35]||(e[35]=t("label",{class:"label"},"Сессии было",-1)),f(t("input",{class:"input border","onUpdate:modelValue":e[11]||(e[11]=l=>s.item.sessions=l),required:""},null,512),[[g,s.item.sessions]]),e[36]||(e[36]=t("label",{class:"label"},"Есть ли опыт с этническими группами",-1)),n(j,{modelValue:s.item.experience_ethnic_group,"onUpdate:modelValue":e[12]||(e[12]=l=>s.item.experience_ethnic_group=l)},{default:o(()=>[n(I,{class:"bg-white border-none shadow-none w-full"},{default:o(()=>[n(M,{placeholder:"Выбрать"})]),_:1}),n($,{class:"bg-white border-gray-200 max-h-[400px]"},{default:o(()=>[(i(!0),d(y,null,w(a.ethnicList,(l,m)=>(i(),c(L,{key:m,value:l.value},{default:o(()=>[b(_(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[37]||(e[37]=t("label",{class:"label"},"Сообщение визитка",-1)),f(t("textarea",{class:"textarea w-full","onUpdate:modelValue":e[13]||(e[13]=l=>s.item.message=l),placeholder:"Bio"},null,512),[[g,s.item.message]]),e[38]||(e[38]=t("label",{class:"label"},"Методы лечения",-1)),t("div",qe,[t("div",De,[(i(!0),d(y,null,w(a.methodsSelected,(l,m)=>(i(),d("span",{key:m,class:"max-w-full block truncate"},_(l),1))),128))]),n(V,null,{default:o(()=>[n(S,{class:"btn btn-sm h-[40px] btn-secondary self-start ml-auto"},{default:o(()=>[e[28]||(e[28]=b(" Выбрать ")),n(h,{name:"ChevronDown",size:14})]),_:1,__:[28]}),n(C,{class:"bg-white",side:"bottom",align:"end"},{default:o(()=>[(i(!0),d(y,null,w(a.methods,(l,m)=>(i(),c(x,{key:m,class:"flex items-center justify-between",onClick:U=>a.pushMethod(l.id)},{default:o(()=>[b(_(l.name)+" ",1),s.item.methods.includes(l.id)?(i(),c(h,{key:0,name:"Check",size:14})):v("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])])])])):v("",!0)],64)}const Fe=A(re,[["render",Me],["__scopeId","data-v-99cb1bac"]]);export{Fe as default};
