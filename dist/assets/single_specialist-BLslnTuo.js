import{S as T}from"./specialist.service-Ct0afQSu.js";import{B as z,C as F,D as R,E as N,F as E}from"./utils-B0VsVXUT.js";import{u as G}from"./upload.service-Dnt6nKun.js";import{_ as O,c as r,o as n,f as l,e as S,t as h,b as i,r as p,k as f,j as b,a5 as P,g,O as c,w as o,F as w,i as v,R as A,a2 as H}from"./index-CqT2QNuy.js";import{_ as J,a as K,b as Q,c as W,d as X,e as Y,f as Z}from"./SelectValue.vue_vue_type_script_setup_true_lang-4sVmtXiY.js";import{_ as ee,a as te,b as se,c as le,d as ie,e as ne}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-0bR7uDRE.js";import{c as oe,a,b as U}from"./index.esm-D0OJZXqD.js";const ae={components:{Select:Z,SelectContent:Y,SelectGroup:X,SelectItem:W,SelectLabel:Q,SelectTrigger:K,SelectValue:J,DropdownMenu:ne,DropdownMenuContent:ie,DropdownMenuItem:le,DropdownMenuLabel:se,DropdownMenuSeparator:te,DropdownMenuTrigger:ee},data:()=>({specialistService:new T,loading:!0,item:null,gender:E,profession:N,route:R,religion:F,ethnic:z,saveLoading:!1}),async created(){await await this.getItem()},computed:{genderList(){return this.gender().list},routeList(){return this.route().list},routeSelected(){return this.item.experience_route.map(t=>this.route(t).getRouteByValue.name).join(", ")},professionList(){return this.profession().list},religionList(){return this.religion().list},ethnicList(){return this.ethnic().list},methodStore(){return H()},methods(){return this.methodStore.methods},methodsSelected(){return this.item.methods.map(t=>this.methodStore.getMethod(t).name)}},methods:{async getItem(){this.item=await this.specialistService.getById(this.$route.params.id),this.loading=!1},pushRoute(t){if(this.item.experience_route.includes(t)){const e=this.item.experience_route.findIndex(m=>m===t);this.item.experience_route.splice(e,1)}else this.item.experience_route.push(t)},pushMethod(t){if(this.item.methods.includes(t)){const e=this.item.methods.findIndex(m=>m===t);this.item.methods.splice(e,1)}else this.item.methods.push(t)},async onChangeFile(t,e){const m=t.target.files[0],k=await G(m);this.item[e]=k},async modelCheck(t){const e=oe({first_name:a().required("Имя обязателен"),last_name:a().required("Фамилия обязателен"),email:a().email().required("Фамилия обязателен"),methods:U().of(a().required()).min(1,"Укажите хотя бы один метод"),experience_route:U().of(a().required()).min(1,"Укажите хотя бы одно направление"),experience_years:a().required("Опыт работы обязателен"),photo:a().required("Загрузите фотографию"),video:a(),gender:a().required("Выберите пол специалиста"),birth_year:a().required("Год рождения обязателен"),price:a().required("Стоимость сессии обязателен"),message:a().required("Сообщение визитка обязателен"),education:a().required("Образование обязателен"),profession:a().required("Профессия обязателен"),sessions:a().required("Сессии обязателен"),religion:a().required("Религия обязателен"),experience_ethnic_group:a().required("Опыт с эт. группами обязателен")});try{let m=await e.validate(t,{abortEarly:!1});return!0}catch(m){return m.errors.map(k=>this.$toast.error(k)),!1}},async onSave(){if(!await this.modelCheck(this.item))return;this.saveLoading=!0;const e=this.item.id,m=this.item;delete m.id,await this.specialistService.updateById(e,m),await this.getItem(),this.saveLoading=!1}}},re={class:"flex gap-2"},de={class:"flex flex-col mb-10"},ue={key:0,class:"text-sm opacity-65"},me=["disabled"],pe={class:"loading loading-spinner text-primary"},fe={key:0,class:"flex justify-center"},be={key:1,class:"grid grid-cols-2 gap-4"},ge={class:"flex flex-col gap-4"},ce={class:"grid grid-cols-2 gap-4"},he=["src"],we={key:1,class:"w-full h-[250px] flex flex-col items-center justify-center bg-gray-100 rounded-lg"},ye={key:3,class:"w-full h-[250px] flex flex-col items-center justify-center bg-gray-100 rounded-lg"},ve={class:"col-span-2 flex flex-col gap-4"},Se={class:"fieldset bg-base-200 border-base-300 rounded-box border p-4"},ke={class:"flex flex-col gap-4"},_e={class:"fieldset bg-base-200 border-base-300 rounded-box border p-4 -mt-[17px]"},Ve={class:"fieldset bg-base-200 border-base-300 rounded-box border p-4 -mt-[17px]"},Ce={class:"flex gap-2"},xe=["value"],qe={class:"flex justify-between gap-2"},De={class:"flex flex-col"};function Me(t,e,m,k,Ie,d){const y=p("Icon"),j=p("video-player"),_=p("SelectValue"),V=p("SelectTrigger"),C=p("SelectItem"),x=p("SelectContent"),q=p("Select"),D=p("DropdownMenuTrigger"),M=p("DropdownMenuItem"),I=p("DropdownMenuContent"),L=p("DropdownMenu"),$=A("maska");return n(),r(w,null,[l("div",re,[l("div",de,[e[17]||(e[17]=l("h1",{class:"text-2xl font-semibold"},"Специалисты",-1)),t.item?(n(),r("span",ue," ID: "+h(t.item.id),1)):S("",!0)]),l("button",{type:"button",class:"btn btn-square ml-auto",onClick:e[0]||(e[0]=s=>t.$router.push("/admin/dashboard/specialists/add"))},[i(y,{name:"Plus",size:14})]),l("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=(...s)=>d.onSave&&d.onSave(...s)),disabled:t.saveLoading},[f(l("span",pe,null,512),[[P,t.saveLoading]]),e[18]||(e[18]=b(" Сохранить "))],8,me)]),t.loading&&t.item===null?(n(),r("div",fe,e[19]||(e[19]=[l("span",{class:"loading loading-spinner text-primary"},null,-1)]))):S("",!0),!t.loading&&t.item!==null?(n(),r("div",be,[l("div",ge,[l("div",ce,[t.item.photo?(n(),r("img",{key:0,class:"w-full h-[250px] object-cover",src:t.$file(t.item.photo)},null,8,he)):(n(),r("div",we,[i(y,{name:"Image",size:20,class:"opacity-65"})])),t.item.video?(n(),g(j,{key:2,src:t.$file(t.item.video),loop:!1,volume:1,controls:!0,aspectRatio:"16:9",class:"min-h-[250px]"},null,8,["src"])):(n(),r("div",ye,[i(y,{name:"Video",size:20,class:"opacity-65"})]))]),l("div",ve,[l("fieldset",Se,[e[20]||(e[20]=l("legend",{class:"fieldset-legend"},"Медиа",-1)),e[21]||(e[21]=l("label",{class:"label"},"Фотография профиля",-1)),l("input",{class:"file-input file-input-ghost file-input-sm border border-white bg-white overflow-hidden w-full",type:"file",accept:"image/*",onChange:e[2]||(e[2]=s=>d.onChangeFile(s,"photo"))},null,32),e[22]||(e[22]=l("label",{class:"label"},"Видео-визитка",-1)),l("input",{class:"file-input file-input-ghost file-input-sm border border-white bg-white overflow-hidden w-full",type:"file",onChange:e[3]||(e[3]=s=>d.onChangeFile(s,"video"))},null,32)])])]),l("div",ke,[l("fieldset",_e,[e[23]||(e[23]=l("legend",{class:"fieldset-legend"},"Персональные данные",-1)),e[24]||(e[24]=l("label",{class:"label"},"Имя",-1)),f(l("input",{class:"input border","onUpdate:modelValue":e[4]||(e[4]=s=>t.item.first_name=s),required:""},null,512),[[c,t.item.first_name]]),e[25]||(e[25]=l("label",{class:"label"},"Фамилия",-1)),f(l("input",{class:"input border","onUpdate:modelValue":e[5]||(e[5]=s=>t.item.last_name=s),required:""},null,512),[[c,t.item.last_name]]),e[26]||(e[26]=l("label",{class:"label"},"Год рождения",-1)),f(l("input",{class:"input border","onUpdate:modelValue":e[6]||(e[6]=s=>t.item.birth_year=s),required:""},null,512),[[c,t.item.birth_year]]),e[27]||(e[27]=l("label",{class:"label"},"Почта",-1)),f(l("input",{class:"input border","onUpdate:modelValue":e[7]||(e[7]=s=>t.item.email=s),required:""},null,512),[[c,t.item.email]]),e[28]||(e[28]=l("label",{class:"label"},"Гендер",-1)),i(q,{modelValue:t.item.gender,"onUpdate:modelValue":e[8]||(e[8]=s=>t.item.gender=s)},{default:o(()=>[i(V,{class:"bg-white border-none shadow-none w-full"},{default:o(()=>[i(_,{placeholder:"Выбрать"})]),_:1}),i(x,{class:"bg-white border-gray-200 max-h-[400px]"},{default:o(()=>[(n(!0),r(w,null,v(d.genderList,(s,u)=>(n(),g(C,{key:u,value:s.value},{default:o(()=>[b(h(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),l("fieldset",Ve,[e[31]||(e[31]=l("legend",{class:"fieldset-legend"},"Проф. профиль",-1)),e[32]||(e[32]=l("label",{class:"label"},"Стоимость сессии",-1)),f(l("input",{class:"input border","onUpdate:modelValue":e[9]||(e[9]=s=>t.item.price=s),required:""},null,512),[[c,t.item.price],[$,"###########"]]),e[33]||(e[33]=l("label",{class:"label"},"Опыт работы в годах",-1)),f(l("input",{class:"input border","onUpdate:modelValue":e[10]||(e[10]=s=>t.item.experience_years=s),"data-maska":"0.99","data-maska-tokens":"0:\\d:multiple|9:\\d:optional",required:""},null,512),[[c,t.item.experience_years],[$]]),e[34]||(e[34]=l("label",{class:"label"},"Направлении",-1)),l("div",Ce,[l("input",{class:"input border",value:d.routeSelected,readonly:""},null,8,xe),i(L,null,{default:o(()=>[i(D,{class:"btn btn-sm h-full btn-secondary"},{default:o(()=>[e[29]||(e[29]=b(" Выбрать ")),i(y,{name:"ChevronDown",size:14})]),_:1,__:[29]}),i(I,{class:"bg-white",side:"bottom",align:"end"},{default:o(()=>[(n(!0),r(w,null,v(d.routeList,(s,u)=>(n(),g(M,{key:u,class:"flex items-center justify-between",onClick:B=>d.pushRoute(s.value)},{default:o(()=>[b(h(s.name)+" ",1),t.item.experience_route.includes(s.value)?(n(),g(y,{key:0,name:"Check",size:14})):S("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),e[35]||(e[35]=l("label",{class:"label"},"Профессия",-1)),i(q,{modelValue:t.item.profession,"onUpdate:modelValue":e[11]||(e[11]=s=>t.item.profession=s)},{default:o(()=>[i(V,{class:"bg-white border-none shadow-none w-full"},{default:o(()=>[i(_,{placeholder:"Выбрать"})]),_:1}),i(x,{class:"bg-white border-gray-200 max-h-[400px]"},{default:o(()=>[(n(!0),r(w,null,v(d.professionList,(s,u)=>(n(),g(C,{key:u,value:s.value},{default:o(()=>[b(h(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[36]||(e[36]=l("label",{class:"label"},"Образование",-1)),f(l("input",{class:"input border","onUpdate:modelValue":e[12]||(e[12]=s=>t.item.education=s),required:""},null,512),[[c,t.item.education]]),e[37]||(e[37]=l("label",{class:"label"},"Сессии было",-1)),f(l("input",{class:"input border","onUpdate:modelValue":e[13]||(e[13]=s=>t.item.sessions=s),required:""},null,512),[[c,t.item.sessions]]),e[38]||(e[38]=l("label",{class:"label"},"Религия",-1)),i(q,{modelValue:t.item.religion,"onUpdate:modelValue":e[14]||(e[14]=s=>t.item.religion=s)},{default:o(()=>[i(V,{class:"bg-white border-none shadow-none w-full"},{default:o(()=>[i(_,{placeholder:"Выбрать"})]),_:1}),i(x,{class:"bg-white border-gray-200 max-h-[400px]"},{default:o(()=>[(n(!0),r(w,null,v(d.religionList,(s,u)=>(n(),g(C,{key:u,value:s.value},{default:o(()=>[b(h(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[39]||(e[39]=l("label",{class:"label"},"Есть ли опыт с этническими группами",-1)),i(q,{modelValue:t.item.experience_ethnic_group,"onUpdate:modelValue":e[15]||(e[15]=s=>t.item.experience_ethnic_group=s)},{default:o(()=>[i(V,{class:"bg-white border-none shadow-none w-full"},{default:o(()=>[i(_,{placeholder:"Выбрать"})]),_:1}),i(x,{class:"bg-white border-gray-200 max-h-[400px]"},{default:o(()=>[(n(!0),r(w,null,v(d.ethnicList,(s,u)=>(n(),g(C,{key:u,value:s.value},{default:o(()=>[b(h(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[40]||(e[40]=l("label",{class:"label"},"Сообщение визитка",-1)),f(l("textarea",{class:"textarea w-full","onUpdate:modelValue":e[16]||(e[16]=s=>t.item.message=s),placeholder:"Bio"},null,512),[[c,t.item.message]]),e[41]||(e[41]=l("label",{class:"label"},"Методы лечения",-1)),l("div",qe,[l("div",De,[(n(!0),r(w,null,v(d.methodsSelected,(s,u)=>(n(),r("span",{key:u,class:"max-w-full block truncate"},h(s),1))),128))]),i(L,null,{default:o(()=>[i(D,{class:"btn btn-sm h-[40px] btn-secondary self-start ml-auto"},{default:o(()=>[e[30]||(e[30]=b(" Выбрать ")),i(y,{name:"ChevronDown",size:14})]),_:1,__:[30]}),i(I,{class:"bg-white",side:"bottom",align:"end"},{default:o(()=>[(n(!0),r(w,null,v(d.methods,(s,u)=>(n(),g(M,{key:u,class:"flex items-center justify-between",onClick:B=>d.pushMethod(s.id)},{default:o(()=>[b(h(s.name)+" ",1),t.item.methods.includes(s.id)?(n(),g(y,{key:0,name:"Check",size:14})):S("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])])])])):S("",!0)],64)}const Fe=O(ae,[["render",Me],["__scopeId","data-v-ab7543c1"]]);export{Fe as default};
