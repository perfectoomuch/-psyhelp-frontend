import{S as B}from"./specialist.service-Ct0afQSu.js";import{B as z,C as F,D as R,E as N,F as E}from"./utils-B0VsVXUT.js";import{u as G}from"./upload.service-Dnt6nKun.js";import{_ as O,c as d,o,f as t,e as q,k as p,j as b,a5 as A,g,b as i,r as m,O as c,R as H,w as n,F as h,i as w,t as y,a2 as J}from"./index-CqT2QNuy.js";import{_ as K,a as P,b as Q,c as W,d as X,e as Y,f as Z}from"./SelectValue.vue_vue_type_script_setup_true_lang-4sVmtXiY.js";import{_ as ee,a as le,b as se,c as te,d as ie,e as ne}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-0bR7uDRE.js";import{c as oe,a as r,b as I}from"./index.esm-D0OJZXqD.js";const re={components:{Select:Z,SelectContent:Y,SelectGroup:X,SelectItem:W,SelectLabel:Q,SelectTrigger:P,SelectValue:K,DropdownMenu:ne,DropdownMenuContent:ie,DropdownMenuItem:te,DropdownMenuLabel:se,DropdownMenuSeparator:le,DropdownMenuTrigger:ee},data:()=>({specialistService:new B,loading:!1,item:{first_name:"",last_name:"",email:"",methods:[],experience_route:[],experience_years:"",photo:"",video:"",gender:"",birth_year:"",price:"",message:"",education:"",profession:"",sessions:"",religion:"",experience_ethnic_group:""},gender:E,profession:N,route:R,religion:F,ethnic:z,saveLoading:!1}),computed:{genderList(){return this.gender().list},routeList(){return this.route().list},routeSelected(){return this.item.experience_route.map(l=>this.route(l).getRouteByValue.name).join(", ")},professionList(){return this.profession().list},religionList(){return this.religion().list},ethnicList(){return this.ethnic().list},methodStore(){return J()},methods(){return this.methodStore.methods},methodsSelected(){return this.item.methods.map(l=>this.methodStore.getMethod(l).name)}},methods:{pushRoute(l){if(this.item.experience_route.includes(l)){const e=this.item.experience_route.findIndex(f=>f===l);this.item.experience_route.splice(e,1)}else this.item.experience_route.push(l)},pushMethod(l){if(this.item.methods.includes(l)){const e=this.item.methods.findIndex(f=>f===l);this.item.methods.splice(e,1)}else this.item.methods.push(l)},async onChangeFile(l,e){const f=l.target.files[0],_=await G(f);this.item[e]=_},async modelCheck(l){const e=oe({first_name:r().required("Имя обязателен"),last_name:r().required("Фамилия обязателен"),email:r().email().required("Фамилия обязателен"),methods:I().of(r().required()).min(1,"Укажите хотя бы один метод"),experience_route:I().of(r().required()).min(1,"Укажите хотя бы одно направление"),experience_years:r().required("Опыт работы обязателен"),photo:r().required("Загрузите фотографию"),video:r(),gender:r().required("Выберите пол специалиста"),birth_year:r().required("Год рождения обязателен"),price:r().required("Стоимость сессии обязателен"),message:r().required("Сообщение визитка обязателен"),education:r().required("Образование обязателен"),profession:r().required("Профессия обязателен"),sessions:r().required("Сессии обязателен"),religion:r().required("Религия обязателен"),experience_ethnic_group:r().required("Опыт с эт. группами обязателен")});try{let f=await e.validate(l,{abortEarly:!1});return!0}catch(f){return f.errors.map(_=>this.$toast.error(_)),!1}},async onCreate(){if(!await this.modelCheck(this.item))return;this.loading=!0;const e=await this.specialistService.create(this.item);this.$router.push(`/admin/dashboard/specialists/${e}`)}}},ae={class:"flex justify-between"},de=["disabled"],ue={class:"loading loading-spinner text-primary"},me={key:0,class:"flex justify-center"},pe={key:1,class:"grid grid-cols-2 gap-4"},fe={class:"flex flex-col gap-4"},be={class:"grid grid-cols-2 gap-4"},ge=["src"],ce={key:1,class:"w-full h-[250px] flex flex-col items-center justify-center bg-gray-100 rounded-lg"},he={key:3,class:"w-full h-[250px] flex flex-col items-center justify-center bg-gray-100 rounded-lg"},we={class:"col-span-2 flex flex-col gap-4"},ye={class:"fieldset bg-base-200 border-base-300 rounded-box border p-4"},ve={class:"flex flex-col gap-4"},_e={class:"fieldset bg-base-200 border-base-300 rounded-box border p-4 -mt-[17px]"},ke={class:"fieldset bg-base-200 border-base-300 rounded-box border p-4 -mt-[17px]"},Se={class:"flex gap-2"},xe=["value"],Ve={class:"flex justify-between gap-2"},Ce={class:"flex flex-col"};function qe(l,e,f,_,De,a){const v=m("Icon"),j=m("video-player"),k=m("SelectValue"),S=m("SelectTrigger"),x=m("SelectItem"),V=m("SelectContent"),C=m("Select"),M=m("DropdownMenuTrigger"),L=m("DropdownMenuItem"),U=m("DropdownMenuContent"),$=m("DropdownMenu"),D=H("maska");return o(),d(h,null,[t("div",ae,[e[17]||(e[17]=t("div",{class:"flex flex-col mb-10"},[t("h1",{class:"text-2xl font-semibold"},"Добавить специалиста")],-1)),t("button",{class:"btn",onClick:e[0]||(e[0]=(...s)=>a.onCreate&&a.onCreate(...s)),disabled:l.loading},[p(t("span",ue,null,512),[[A,l.loading]]),e[16]||(e[16]=b(" Добавить "))],8,de)]),l.loading&&l.item===null?(o(),d("div",me,e[18]||(e[18]=[t("span",{class:"loading loading-spinner text-primary"},null,-1)]))):q("",!0),!l.loading&&l.item!==null?(o(),d("div",pe,[t("div",fe,[t("div",be,[l.item.photo?(o(),d("img",{key:0,class:"w-full h-[250px] object-cover",src:l.$file(l.item.photo)},null,8,ge)):(o(),d("div",ce,[i(v,{name:"Image",size:20,class:"opacity-65"})])),l.item.video?(o(),g(j,{key:2,src:l.$file(l.item.video),loop:!1,volume:1,controls:!0,aspectRatio:"16:9",class:"min-h-[250px]"},null,8,["src"])):(o(),d("div",he,[i(v,{name:"Video",size:20,class:"opacity-65"})]))]),t("div",we,[t("fieldset",ye,[e[19]||(e[19]=t("legend",{class:"fieldset-legend"},"Медиа",-1)),e[20]||(e[20]=t("label",{class:"label"},"Фотография профиля",-1)),t("input",{class:"file-input file-input-ghost file-input-sm border border-white bg-white overflow-hidden w-full",type:"file",accept:"image/*",onChange:e[1]||(e[1]=s=>a.onChangeFile(s,"photo"))},null,32),e[21]||(e[21]=t("label",{class:"label"},"Видео-визитка",-1)),t("input",{class:"file-input file-input-ghost file-input-sm border border-white bg-white overflow-hidden w-full",type:"file",onChange:e[2]||(e[2]=s=>a.onChangeFile(s,"video"))},null,32)])])]),t("div",ve,[t("fieldset",_e,[e[22]||(e[22]=t("legend",{class:"fieldset-legend"},"Персональные данные",-1)),e[23]||(e[23]=t("label",{class:"label"},"Имя",-1)),p(t("input",{class:"input border","onUpdate:modelValue":e[3]||(e[3]=s=>l.item.first_name=s),required:""},null,512),[[c,l.item.first_name]]),e[24]||(e[24]=t("label",{class:"label"},"Фамилия",-1)),p(t("input",{class:"input border","onUpdate:modelValue":e[4]||(e[4]=s=>l.item.last_name=s),required:""},null,512),[[c,l.item.last_name]]),e[25]||(e[25]=t("label",{class:"label"},"Год рождения",-1)),p(t("input",{class:"input border","onUpdate:modelValue":e[5]||(e[5]=s=>l.item.birth_year=s),required:""},null,512),[[D,"####"],[c,l.item.birth_year]]),e[26]||(e[26]=t("label",{class:"label"},"Почта",-1)),p(t("input",{class:"input border","onUpdate:modelValue":e[6]||(e[6]=s=>l.item.email=s),required:""},null,512),[[c,l.item.email]]),e[27]||(e[27]=t("label",{class:"label"},"Гендер",-1)),i(C,{modelValue:l.item.gender,"onUpdate:modelValue":e[7]||(e[7]=s=>l.item.gender=s)},{default:n(()=>[i(S,{class:"bg-white border-none shadow-none w-full"},{default:n(()=>[i(k,{placeholder:"Выбрать"})]),_:1}),i(V,{class:"bg-white border-gray-200 max-h-[400px]"},{default:n(()=>[(o(!0),d(h,null,w(a.genderList,(s,u)=>(o(),g(x,{key:u,value:s.value},{default:n(()=>[b(y(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),t("fieldset",ke,[e[30]||(e[30]=t("legend",{class:"fieldset-legend"},"Проф. профиль",-1)),e[31]||(e[31]=t("label",{class:"label"},"Стоимость сессии",-1)),p(t("input",{class:"input border","onUpdate:modelValue":e[8]||(e[8]=s=>l.item.price=s),required:""},null,512),[[c,l.item.price],[D,"###########"]]),e[32]||(e[32]=t("label",{class:"label"},"Опыт работы в годах",-1)),p(t("input",{class:"input border","onUpdate:modelValue":e[9]||(e[9]=s=>l.item.experience_years=s),"data-maska":"0.99","data-maska-tokens":"0:\\d:multiple|9:\\d:optional",required:""},null,512),[[c,l.item.experience_years],[D]]),e[33]||(e[33]=t("label",{class:"label"},"Направлении",-1)),t("div",Se,[t("input",{class:"input border",value:a.routeSelected,readonly:""},null,8,xe),i($,null,{default:n(()=>[i(M,{class:"btn btn-sm h-full btn-secondary"},{default:n(()=>[e[28]||(e[28]=b(" Выбрать ")),i(v,{name:"ChevronDown",size:14})]),_:1,__:[28]}),i(U,{class:"bg-white",side:"bottom",align:"end"},{default:n(()=>[(o(!0),d(h,null,w(a.routeList,(s,u)=>(o(),g(L,{key:u,class:"flex items-center justify-between",onClick:T=>a.pushRoute(s.value)},{default:n(()=>[b(y(s.name)+" ",1),l.item.experience_route.includes(s.value)?(o(),g(v,{key:0,name:"Check",size:14})):q("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),e[34]||(e[34]=t("label",{class:"label"},"Профессия",-1)),i(C,{modelValue:l.item.profession,"onUpdate:modelValue":e[10]||(e[10]=s=>l.item.profession=s)},{default:n(()=>[i(S,{class:"bg-white border-none shadow-none w-full"},{default:n(()=>[i(k,{placeholder:"Выбрать"})]),_:1}),i(V,{class:"bg-white border-gray-200 max-h-[400px]"},{default:n(()=>[(o(!0),d(h,null,w(a.professionList,(s,u)=>(o(),g(x,{key:u,value:s.value},{default:n(()=>[b(y(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[35]||(e[35]=t("label",{class:"label"},"Образование",-1)),p(t("input",{class:"input border","onUpdate:modelValue":e[11]||(e[11]=s=>l.item.education=s),required:""},null,512),[[c,l.item.education]]),e[36]||(e[36]=t("label",{class:"label"},"Сессии было",-1)),p(t("input",{class:"input border","onUpdate:modelValue":e[12]||(e[12]=s=>l.item.sessions=s),required:""},null,512),[[c,l.item.sessions]]),e[37]||(e[37]=t("label",{class:"label"},"Религия",-1)),i(C,{modelValue:l.item.religion,"onUpdate:modelValue":e[13]||(e[13]=s=>l.item.religion=s)},{default:n(()=>[i(S,{class:"bg-white border-none shadow-none w-full"},{default:n(()=>[i(k,{placeholder:"Выбрать"})]),_:1}),i(V,{class:"bg-white border-gray-200 max-h-[400px]"},{default:n(()=>[(o(!0),d(h,null,w(a.religionList,(s,u)=>(o(),g(x,{key:u,value:s.value},{default:n(()=>[b(y(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[38]||(e[38]=t("label",{class:"label"},"Есть ли опыт с этническими группами",-1)),i(C,{modelValue:l.item.experience_ethnic_group,"onUpdate:modelValue":e[14]||(e[14]=s=>l.item.experience_ethnic_group=s)},{default:n(()=>[i(S,{class:"bg-white border-none shadow-none w-full"},{default:n(()=>[i(k,{placeholder:"Выбрать"})]),_:1}),i(V,{class:"bg-white border-gray-200 max-h-[400px]"},{default:n(()=>[(o(!0),d(h,null,w(a.ethnicList,(s,u)=>(o(),g(x,{key:u,value:s.value},{default:n(()=>[b(y(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[39]||(e[39]=t("label",{class:"label"},"Сообщение визитка",-1)),p(t("textarea",{class:"textarea w-full","onUpdate:modelValue":e[15]||(e[15]=s=>l.item.message=s),placeholder:"Bio"},null,512),[[c,l.item.message]]),e[40]||(e[40]=t("label",{class:"label"},"Методы лечения",-1)),t("div",Ve,[t("div",Ce,[(o(!0),d(h,null,w(a.methodsSelected,(s,u)=>(o(),d("span",{key:u,class:"max-w-full block truncate"},y(s),1))),128))]),i($,null,{default:n(()=>[i(M,{class:"btn btn-sm h-[40px] btn-secondary self-start ml-auto"},{default:n(()=>[e[29]||(e[29]=b(" Выбрать ")),i(v,{name:"ChevronDown",size:14})]),_:1,__:[29]}),i(U,{class:"bg-white",side:"bottom",align:"end"},{default:n(()=>[(o(!0),d(h,null,w(a.methods,(s,u)=>(o(),g(L,{key:u,class:"flex items-center justify-between",onClick:T=>a.pushMethod(s.id)},{default:n(()=>[b(y(s.name)+" ",1),l.item.methods.includes(s.id)?(o(),g(v,{key:0,name:"Check",size:14})):q("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])])])])):q("",!0)],64)}const Be=O(re,[["render",qe],["__scopeId","data-v-a4d5aa63"]]);export{Be as default};
