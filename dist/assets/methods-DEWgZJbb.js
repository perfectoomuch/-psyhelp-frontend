import{h as p,a4 as d,_ as z,c as m,o as u,e as t,g as h,b as o,w as s,r as n,q as c,j as k,l as T,F as P,i as I,t as S}from"./index-Do8ladI-.js";import{_ as N,a as j,b as B,c as H,d as M,e as E,f as L,g as G,h as J}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-WKbUMolr.js";import{_ as K,a as O,b as Q}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-CQlIJ_7r.js";import"./utils-DopF4P6a.js";import"./index-D0qolDQq.js";class R{async getAll(){try{return(await p.get("admin/methods")).data}catch(e){return console.log(e),d.error("Непредвиденная ошибка"),[]}}async create(e){try{const a=await p.post("admin/methods",e);return d.success("Метод создан"),a.data}catch(a){console.log(a),d.error("Непредвиденная ошибка")}}async update(e,a){try{const r=await p.post(`admin/methods/update/${e}`,a);return d.success("Метод обновлен"),r.data}catch(r){console.log(r),d.error("Непредвиденная ошибка")}}async delete(e){try{const a=await p.post(`admin/methods/delete/${e}`);return d.success("Метод удален"),a.data}catch(a){console.log(a),d.error("Непредвиденная ошибка")}}}const W={components:{AlertDialog:J,AlertDialogAction:G,AlertDialogCancel:L,AlertDialogContent:E,AlertDialogDescription:M,AlertDialogFooter:H,AlertDialogHeader:B,AlertDialogTitle:j,AlertDialogTrigger:N,Popover:Q,PopoverContent:O,PopoverTrigger:K},data:()=>({methodService:new R,loading:!0,methods:[],form:{name:""}}),created(){this.getAll()},methods:{async getAll(){const l=await this.methodService.getAll();l&&(this.methods=l,this.loading=!1)},async onUpdate(l){const e=this.methods[l],a=e.id,r={...e};delete r.id,delete r.created_at,delete r.updated_at,await this.methodService.update(a,r)&&await this.getAll()},async onCreate(){if(this.form.name.trim().length==0){this.$toast.info("Заполните название лечении");return}await this.methodService.create(this.form)&&await this.getAll()},async onDelete(l){await this.methodService.delete(l),await this.getAll()}}},X={class:"flex justify-between"},Y={class:"flex flex-col"},Z={key:0,class:"flex justify-center"},ee={key:1,role:"alert",class:"alert"},te={key:2,class:"overflow-x-auto"},oe={class:"table table-sm"},se={class:"whitespace-nowrap"},le={class:"flex gap-2"},ae={class:"flex flex-col"},ne=["onUpdate:modelValue"],re=["onClick"];function ie(l,e,a,r,V,f){const _=n("Icon"),A=n("AlertDialogTrigger"),b=n("AlertDialogTitle"),v=n("AlertDialogHeader"),D=n("AlertDialogCancel"),y=n("AlertDialogAction"),w=n("AlertDialogFooter"),C=n("AlertDialogContent"),$=n("AlertDialog"),q=n("PopoverTrigger"),F=n("PopoverContent"),U=n("Popover");return u(),m(P,null,[t("div",X,[e[5]||(e[5]=t("div",{class:"flex items-center gap-2 mb-10"},[t("h1",{class:"text-2xl font-semibold"},"Методы лечения")],-1)),o($,null,{default:s(()=>[o(A,{class:"btn btn-primary"},{default:s(()=>[o(_,{name:"Plus",size:14}),e[1]||(e[1]=c(" Добавить "))]),_:1,__:[1]}),o(C,{class:"w-sm"},{default:s(()=>[o(v,null,{default:s(()=>[o(b,null,{default:s(()=>e[2]||(e[2]=[c("Добавить метод")])),_:1,__:[2]})]),_:1}),t("div",Y,[k(t("input",{class:"input border w-full","onUpdate:modelValue":e[0]||(e[0]=i=>l.form.name=i),placeholder:"Метод",required:""},null,512),[[T,l.form.name]])]),o(w,null,{default:s(()=>[o(D,{class:"hover:bg-gray-100"},{default:s(()=>e[3]||(e[3]=[c(" Отмена ")])),_:1,__:[3]}),o(y,{onClick:f.onCreate,class:"text-white"},{default:s(()=>e[4]||(e[4]=[c(" Добавить ")])),_:1,__:[4]},8,["onClick"])]),_:1})]),_:1})]),_:1})]),l.loading?(u(),m("div",Z,e[6]||(e[6]=[t("span",{class:"loading loading-spinner text-primary"},null,-1)]))):h("",!0),!l.loading&&l.methods.length===0?(u(),m("div",ee,[o(_,{name:"Info",class:"min-size-4 text-primary"}),e[7]||(e[7]=t("span",null,"На данный момент нет методов. Добавьте метод",-1))])):h("",!0),!l.loading&&l.methods.length>0?(u(),m("div",te,[t("table",oe,[e[12]||(e[12]=t("thead",null,[t("tr",null,[t("th",{class:"font-medium"},"ID"),t("th",{class:"font-medium"},"Метод"),t("th",{class:"font-medium"},"Действие")])],-1)),t("tbody",null,[(u(!0),m(P,null,I(l.methods,(i,x)=>(u(),m("tr",{key:x},[t("td",null,[t("span",se,S(i.id),1)]),t("td",null,S(i.name),1),t("td",null,[t("div",le,[o($,null,{default:s(()=>[o(A,{class:"btn btn-sm btn-square btn-primary"},{default:s(()=>[o(_,{name:"Pencil",size:14})]),_:1}),o(C,{class:"w-sm"},{default:s(()=>[o(v,null,{default:s(()=>[o(b,null,{default:s(()=>e[8]||(e[8]=[c("Редактировать метод")])),_:1,__:[8]})]),_:1}),t("div",ae,[k(t("input",{class:"input border w-full","onUpdate:modelValue":g=>i.name=g,required:""},null,8,ne),[[T,i.name]])]),o(w,null,{default:s(()=>[o(D,{class:"hover:bg-gray-100"},{default:s(()=>e[9]||(e[9]=[c(" Отмена ")])),_:1,__:[9]}),o(y,{onClick:g=>f.onUpdate(x),class:"text-white"},{default:s(()=>e[10]||(e[10]=[c(" Сохранить ")])),_:2,__:[10]},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(U,null,{default:s(()=>[o(q,{class:"btn btn-sm btn-square btn-error btn-soft"},{default:s(()=>[o(_,{name:"Trash",size:14})]),_:1}),o(F,null,{default:s(()=>[e[11]||(e[11]=t("p",{class:"text-sm mb-4"}," Вы точно хотите удалить данного метода? ",-1)),t("button",{class:"btn btn-sm btn-error w-full",onClick:g=>f.onDelete(i.id)}," Да, удалить ",8,re)]),_:2,__:[11]},1024)]),_:2},1024)])])]))),128))])])])):h("",!0)],64)}const pe=z(W,[["render",ie]]);export{pe as default};
