import{h as _,ag as d,_ as z,c as m,o as u,e,g as h,b as o,w as s,r as a,q as c,j as k,l as T,F as P,i as N,t as S}from"./index-DlouWDH6.js";import{_ as j,a as B,b as H,c as M,d as E,e as L,f as G,g as J,h as K}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-B-V1Dyh_.js";import{_ as O,a as Q,b as R}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-Bt4G_JXU.js";import"./utils-qwHvG82s.js";import"./index-BBhC-Yv9.js";class W{async getAll(){try{return(await _.get("admin/methods")).data}catch(t){return console.log(t),d.error("Непредвиденная ошибка"),[]}}async create(t){try{const n=await _.post("admin/methods",t);return d.success("Метод создан"),n.data}catch(n){console.log(n),d.error("Непредвиденная ошибка")}}async update(t,n){try{const r=await _.post(`admin/methods/update/${t}`,n);return d.success("Метод обновлен"),r.data}catch(r){console.log(r),d.error("Непредвиденная ошибка")}}async delete(t){try{const n=await _.post(`admin/methods/delete/${t}`);return d.success("Метод удален"),n.data}catch(n){console.log(n),d.error("Непредвиденная ошибка")}}}const X={components:{AlertDialog:K,AlertDialogAction:J,AlertDialogCancel:G,AlertDialogContent:L,AlertDialogDescription:E,AlertDialogFooter:M,AlertDialogHeader:H,AlertDialogTitle:B,AlertDialogTrigger:j,Popover:R,PopoverContent:Q,PopoverTrigger:O},data:()=>({methodService:new W,loading:!0,methods:[],form:{name:""}}),created(){this.getAll()},methods:{async getAll(){const l=await this.methodService.getAll();l&&(this.methods=l,this.loading=!1)},async onUpdate(l){const t=this.methods[l],n=t.id,r={...t};delete r.id,delete r.created_at,delete r.updated_at,await this.methodService.update(n,r)&&await this.getAll()},async onCreate(){if(this.form.name.trim().length==0){this.$toast.info("Заполните название лечении");return}await this.methodService.create(this.form)&&await this.getAll()},async onDelete(l){await this.methodService.delete(l),await this.getAll()}}},Y={class:"flex justify-between"},Z={class:"flex flex-col"},tt={key:0,class:"flex justify-center"},et={key:1,role:"alert",class:"alert"},ot={key:2,class:"overflow-x-auto"},st={class:"table table-sm"},lt={class:"whitespace-nowrap"},at={class:"flex gap-2"},nt={class:"flex flex-col"},rt=["onUpdate:modelValue"],it=["onClick"];function dt(l,t,n,r,V,p){const f=a("Icon"),A=a("AlertDialogTrigger"),b=a("AlertDialogTitle"),v=a("AlertDialogHeader"),D=a("AlertDialogCancel"),y=a("AlertDialogAction"),w=a("AlertDialogFooter"),C=a("AlertDialogContent"),$=a("AlertDialog"),q=a("Info"),F=a("PopoverTrigger"),I=a("PopoverContent"),U=a("Popover");return u(),m(P,null,[e("div",Y,[t[5]||(t[5]=e("div",{class:"flex items-center gap-2 mb-10"},[e("h1",{class:"text-2xl font-semibold"},"Методы лечения")],-1)),o($,null,{default:s(()=>[o(A,{class:"btn btn-primary"},{default:s(()=>[o(f,{name:"Plus",size:14}),t[1]||(t[1]=c(" Добавить "))]),_:1,__:[1]}),o(C,{class:"w-sm"},{default:s(()=>[o(v,null,{default:s(()=>[o(b,null,{default:s(()=>t[2]||(t[2]=[c("Добавить метод")])),_:1,__:[2]})]),_:1}),e("div",Z,[k(e("input",{class:"input border w-full","onUpdate:modelValue":t[0]||(t[0]=i=>l.form.name=i),placeholder:"Метод",required:""},null,512),[[T,l.form.name]])]),o(w,null,{default:s(()=>[o(D,{class:"hover:bg-gray-100"},{default:s(()=>t[3]||(t[3]=[c(" Отмена ")])),_:1,__:[3]}),o(y,{onClick:p.onCreate,class:"text-white"},{default:s(()=>t[4]||(t[4]=[c(" Добавить ")])),_:1,__:[4]},8,["onClick"])]),_:1})]),_:1})]),_:1})]),l.loading?(u(),m("div",tt,t[6]||(t[6]=[e("span",{class:"loading loading-spinner text-primary"},null,-1)]))):h("",!0),!l.loading&&l.methods.length===0?(u(),m("div",et,[o(q,{class:"min-size-4 text-primary"}),t[7]||(t[7]=e("span",null,"На данный момент нет методов. Добавьте метод",-1))])):h("",!0),!l.loading&&l.methods.length>0?(u(),m("div",ot,[e("table",st,[t[12]||(t[12]=e("thead",null,[e("tr",null,[e("th",{class:"font-medium"},"ID"),e("th",{class:"font-medium"},"Метод"),e("th",{class:"font-medium"},"Действие")])],-1)),e("tbody",null,[(u(!0),m(P,null,N(l.methods,(i,x)=>(u(),m("tr",{key:x},[e("td",null,[e("span",lt,S(i.id),1)]),e("td",null,S(i.name),1),e("td",null,[e("div",at,[o($,null,{default:s(()=>[o(A,{class:"btn btn-sm btn-square btn-primary"},{default:s(()=>[o(f,{name:"Pencil",size:14})]),_:1}),o(C,{class:"w-sm"},{default:s(()=>[o(v,null,{default:s(()=>[o(b,null,{default:s(()=>t[8]||(t[8]=[c("Редактировать метод")])),_:1,__:[8]})]),_:1}),e("div",nt,[k(e("input",{class:"input border w-full","onUpdate:modelValue":g=>i.name=g,required:""},null,8,rt),[[T,i.name]])]),o(w,null,{default:s(()=>[o(D,{class:"hover:bg-gray-100"},{default:s(()=>t[9]||(t[9]=[c(" Отмена ")])),_:1,__:[9]}),o(y,{onClick:g=>p.onUpdate(x),class:"text-white"},{default:s(()=>t[10]||(t[10]=[c(" Сохранить ")])),_:2,__:[10]},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(U,null,{default:s(()=>[o(F,{class:"btn btn-sm btn-square btn-error btn-soft"},{default:s(()=>[o(f,{name:"Trash",size:14})]),_:1}),o(I,null,{default:s(()=>[t[11]||(t[11]=e("p",{class:"text-sm mb-4"}," Вы точно хотите удалить данного метода? ",-1)),e("button",{class:"btn btn-sm btn-error w-full",onClick:g=>p.onDelete(i.id)}," Да, удалить ",8,it)]),_:2,__:[11]},1024)]),_:2},1024)])])]))),128))])])])):h("",!0)],64)}const ft=z(X,[["render",dt]]);export{ft as default};
