import{S as U}from"./specialist.service-D9mY9H-k.js";import{B as j,C as F,D as q,E as z,F as N}from"./utils-CDUin7Vs.js";import{h as R,a3 as T,_ as E,c as d,o as i,f as s,e as c,t as b,k as w,j as m,a4 as G,g as p,r as u,b as n,O as V,w as o,F as g,i as h,a1 as O}from"./index-DzxkEMkm.js";import{_ as A,a as H,b as J,c as K,d as P,e as Q,f as W}from"./SelectValue.vue_vue_type_script_setup_true_lang-C-U_ImhQ.js";import{_ as X,a as Y,b as Z,c as ee,d as te,e as le}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Bpt7iIWc.js";const se=async t=>{try{const e=new FormData;e.append("file",t);const f=await R.post("upload",e,{headers:{"Content-Type":"multipart/form-data"}});return T.success("Файл загружен"),f.data.filename}catch(e){console.log(e),T.error("Ошибка при загрузке файла")}},ne={components:{Select:W,SelectContent:Q,SelectGroup:P,SelectItem:K,SelectLabel:J,SelectTrigger:H,SelectValue:A,DropdownMenu:le,DropdownMenuContent:te,DropdownMenuItem:ee,DropdownMenuLabel:Z,DropdownMenuSeparator:Y,DropdownMenuTrigger:X},data:()=>({specialistService:new U,loading:!0,item:null,gender:N,profession:z,route:q,religion:F,ethnic:j,saveLoading:!1}),async created(){await this.getItem()},computed:{genderList(){return this.gender().list},routeList(){return this.route().list},routeSelected(){return this.item.experience_route.map(t=>this.route(t).getRouteByValue.name).join(", ")},professionList(){return this.profession().list},religionList(){return this.religion().list},ethnicList(){return this.ethnic().list},methodStore(){return O()},methods(){return this.methodStore.methods},methodsSelected(){return this.item.methods.map(t=>this.methodStore.getMethod(t).name)}},methods:{async getItem(){this.item=await this.specialistService.getById(this.$route.params.id),this.loading=!1},pushRoute(t){if(this.item.experience_route.includes(t)){const e=this.item.experience_route.findIndex(f=>f===t);this.item.experience_route.splice(e,1)}else this.item.experience_route.push(t)},pushMethod(t){if(this.item.methods.includes(t)){const e=this.item.methods.findIndex(f=>f===t);this.item.methods.splice(e,1)}else this.item.methods.push(t)},async onChangeFile(t,e){const f=t.target.files[0],D=await se(f);this.item[e]=D},async onSave(){this.saveLoading=!0;const t=this.item.id,e=this.item;delete e.id,await this.specialistService.updateById(t,e),await this.getItem(),this.saveLoading=!1}}},oe={class:"flex justify-between"},ie={class:"flex flex-col mb-10"},ae={key:0,class:"text-sm opacity-65"},re=["disabled"],de={class:"loading loading-spinner text-primary"},ue={key:0,class:"flex justify-center"},me={key:1,class:"grid grid-cols-2 gap-4"},pe={class:"grid grid-cols-2 gap-4"},fe=["src"],be={class:"col-span-2 flex flex-col gap-4"},ge={class:"fieldset bg-base-200 border-base-300 rounded-box border p-4"},ce={class:"flex flex-col gap-4"},he={class:"fieldset bg-base-200 border-base-300 rounded-box border p-4 -mt-[17px]"},we={class:"fieldset bg-base-200 border-base-300 rounded-box border p-4 -mt-[17px]"},_e={class:"flex gap-2"},ve=["value"],ye={class:"flex gap-2"},Se={class:"flex flex-col"};function ke(t,e,f,D,Ce,a){const $=u("video-player"),_=u("SelectValue"),v=u("SelectTrigger"),y=u("SelectItem"),S=u("SelectContent"),k=u("Select"),C=u("Icon"),x=u("DropdownMenuTrigger"),M=u("DropdownMenuItem"),L=u("DropdownMenuContent"),I=u("DropdownMenu");return i(),d(g,null,[s("div",oe,[s("div",ie,[e[11]||(e[11]=s("h1",{class:"text-2xl font-semibold"},"Специалисты",-1)),t.item?(i(),d("span",ae," ID: "+b(t.item.id),1)):c("",!0)]),s("button",{class:"btn",onClick:e[0]||(e[0]=(...l)=>a.onSave&&a.onSave(...l)),disabled:t.saveLoading},[w(s("span",de,null,512),[[G,t.saveLoading]]),e[12]||(e[12]=m(" Сохранить "))],8,re)]),t.loading&&t.item===null?(i(),d("div",ue,e[13]||(e[13]=[s("span",{class:"loading loading-spinner text-primary"},null,-1)]))):c("",!0),!t.loading&&t.item!==null?(i(),d("div",me,[s("div",pe,[t.item.photo?(i(),d("img",{key:0,class:"w-full h-full object-cover",src:t.$file(t.item.photo)},null,8,fe)):c("",!0),t.item.video?(i(),p($,{key:1,src:t.$file(t.item.video),loop:!1,volume:1,controls:!0,aspectRatio:"16:9",class:"min-h-full"},null,8,["src"])):c("",!0),s("div",be,[s("fieldset",ge,[e[14]||(e[14]=s("legend",{class:"fieldset-legend"},"Медиа",-1)),e[15]||(e[15]=s("label",{class:"label"},"Фотография профиля",-1)),s("input",{class:"file-input file-input-ghost file-input-sm border border-white bg-white overflow-hidden w-full",type:"file",accept:"image/*",onChange:e[1]||(e[1]=l=>a.onChangeFile(l,"photo"))},null,32),e[16]||(e[16]=s("label",{class:"label"},"Видео-визитка",-1)),s("input",{class:"file-input file-input-ghost file-input-sm border border-white bg-white overflow-hidden w-full",type:"file",onChange:e[2]||(e[2]=l=>a.onChangeFile(l,"video"))},null,32)])])]),s("div",ce,[s("fieldset",he,[e[17]||(e[17]=s("legend",{class:"fieldset-legend"},"Персональные данные",-1)),e[18]||(e[18]=s("label",{class:"label"},"Имя",-1)),w(s("input",{class:"input border","onUpdate:modelValue":e[3]||(e[3]=l=>t.item.first_name=l),required:""},null,512),[[V,t.item.first_name]]),e[19]||(e[19]=s("label",{class:"label"},"Фамилия",-1)),w(s("input",{class:"input border","onUpdate:modelValue":e[4]||(e[4]=l=>t.item.last_name=l),required:""},null,512),[[V,t.item.last_name]]),e[20]||(e[20]=s("label",{class:"label"},"Год рождения",-1)),w(s("input",{class:"input border","onUpdate:modelValue":e[5]||(e[5]=l=>t.item.birth_year=l),required:""},null,512),[[V,t.item.birth_year]]),e[21]||(e[21]=s("label",{class:"label"},"Почта",-1)),w(s("input",{class:"input border","onUpdate:modelValue":e[6]||(e[6]=l=>t.item.email=l),required:""},null,512),[[V,t.item.email]]),e[22]||(e[22]=s("label",{class:"label"},"Гендер",-1)),n(k,{modelValue:t.item.gender,"onUpdate:modelValue":e[7]||(e[7]=l=>t.item.gender=l)},{default:o(()=>[n(v,{class:"bg-white border-none shadow-none w-full"},{default:o(()=>[n(_,{placeholder:"Выбрать"})]),_:1}),n(S,{class:"bg-white border-gray-200 max-h-[400px]"},{default:o(()=>[(i(!0),d(g,null,h(a.genderList,(l,r)=>(i(),p(y,{key:r,value:l.value},{default:o(()=>[m(b(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),s("fieldset",we,[e[25]||(e[25]=s("legend",{class:"fieldset-legend"},"Проф. профиль",-1)),e[26]||(e[26]=s("label",{class:"label"},"Направлении",-1)),s("div",_e,[s("input",{class:"input border",value:a.routeSelected,readonly:""},null,8,ve),n(I,null,{default:o(()=>[n(x,{class:"btn btn-sm h-full btn-secondary"},{default:o(()=>[e[23]||(e[23]=m(" Выбрать ")),n(C,{name:"ChevronDown",size:14})]),_:1,__:[23]}),n(L,{class:"bg-white",side:"bottom",align:"end"},{default:o(()=>[(i(!0),d(g,null,h(a.routeList,(l,r)=>(i(),p(M,{key:r,class:"flex items-center justify-between",onClick:B=>a.pushRoute(l.value)},{default:o(()=>[m(b(l.name)+" ",1),t.item.experience_route.includes(l.value)?(i(),p(C,{key:0,name:"Check",size:14})):c("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),e[27]||(e[27]=s("label",{class:"label"},"Профессия",-1)),n(k,{modelValue:t.item.profession,"onUpdate:modelValue":e[8]||(e[8]=l=>t.item.profession=l)},{default:o(()=>[n(v,{class:"bg-white border-none shadow-none w-full"},{default:o(()=>[n(_,{placeholder:"Выбрать"})]),_:1}),n(S,{class:"bg-white border-gray-200 max-h-[400px]"},{default:o(()=>[(i(!0),d(g,null,h(a.professionList,(l,r)=>(i(),p(y,{key:r,value:l.value},{default:o(()=>[m(b(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[28]||(e[28]=s("label",{class:"label"},"Религия",-1)),n(k,{modelValue:t.item.religion,"onUpdate:modelValue":e[9]||(e[9]=l=>t.item.religion=l)},{default:o(()=>[n(v,{class:"bg-white border-none shadow-none w-full"},{default:o(()=>[n(_,{placeholder:"Выбрать"})]),_:1}),n(S,{class:"bg-white border-gray-200 max-h-[400px]"},{default:o(()=>[(i(!0),d(g,null,h(a.religionList,(l,r)=>(i(),p(y,{key:r,value:l.value},{default:o(()=>[m(b(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[29]||(e[29]=s("label",{class:"label"},"Есть ли опыт с этническими группами",-1)),n(k,{modelValue:t.item.experience_ethnic_group,"onUpdate:modelValue":e[10]||(e[10]=l=>t.item.experience_ethnic_group=l)},{default:o(()=>[n(v,{class:"bg-white border-none shadow-none w-full"},{default:o(()=>[n(_,{placeholder:"Выбрать"})]),_:1}),n(S,{class:"bg-white border-gray-200 max-h-[400px]"},{default:o(()=>[(i(!0),d(g,null,h(a.ethnicList,(l,r)=>(i(),p(y,{key:r,value:l.value},{default:o(()=>[m(b(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[30]||(e[30]=s("label",{class:"label"},"Методы лечения",-1)),s("div",ye,[s("div",Se,[(i(!0),d(g,null,h(a.methodsSelected,(l,r)=>(i(),d("span",{key:r,class:"max-w-full block truncate"},b(l),1))),128))]),n(I,null,{default:o(()=>[n(x,{class:"btn btn-sm h-[40px] btn-secondary self-start"},{default:o(()=>[e[24]||(e[24]=m(" Выбрать ")),n(C,{name:"ChevronDown",size:14})]),_:1,__:[24]}),n(L,{class:"bg-white",side:"bottom",align:"end"},{default:o(()=>[(i(!0),d(g,null,h(a.methods,(l,r)=>(i(),p(M,{key:r,class:"flex items-center justify-between",onClick:B=>a.pushMethod(l.id)},{default:o(()=>[m(b(l.name)+" ",1),t.item.methods.includes(l.id)?(i(),p(C,{key:0,name:"Check",size:14})):c("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])])])])):c("",!0)],64)}const Ie=E(ne,[["render",ke],["__scopeId","data-v-b3a4fccd"]]);export{Ie as default};
