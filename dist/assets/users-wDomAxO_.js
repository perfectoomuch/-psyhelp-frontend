import{h as c,a4 as u,_ as x,c as r,o as a,f as e,e as d,G as _,b as m,k as b,r as h,O as v,F as p,i as w,t as l}from"./index-CqT2QNuy.js";class S{async getAll(){try{return(await c.get("admin/customers")).data}catch(s){return console.log(s),u.error("Непредвиденная ошибка"),[]}}async getById(s){try{return(await c.get(`admin/customers/${s}`)).data}catch(o){console.log(o),u.error("Такой заявки не существует")}}async getBySearch(s){try{return(await c.post("admin/customers/search",{search:s})).data}catch(o){console.log(o),u.error("Ошибка при поиске")}}}const k={data:()=>({customerService:new S,loading:!0,customers:[],search:{text:"",used:!1,result:[]}}),async created(){await this.getAll()},computed:{customersMap(){return this.search.used?this.search.result:this.customers}},methods:{async getAll(){this.customers=await this.customerService.getAll(),this.loading=!1},async onSearch(){if(this.search.text.trim().length===0){this.search.result=[],this.search.used=!1;return}this.search.result=await this.customerService.getBySearch(this.search.text),this.search.used=!0}}},I={class:"flex justify-between"},B={class:"input border"},M={key:0,class:"flex justify-center"},A={key:1,role:"alert",class:"alert"},C={key:2,class:"overflow-x-auto"},D={class:"table table-sm"},V=["href"],N=["href"],$={key:1};function j(n,s,o,z,E,i){const f=h("Icon"),y=h("Info");return a(),r(p,null,[e("div",I,[s[3]||(s[3]=e("h1",{class:"text-2xl font-semibold mb-10"},"Все пользователи",-1)),e("form",{onSubmit:s[1]||(s[1]=_((...t)=>i.onSearch&&i.onSearch(...t),["prevent"])),class:"flex gap-2"},[e("label",B,[m(f,{name:"Search",size:16}),b(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>n.search.text=t),type:"text",class:"grow",placeholder:"id, email, username"},null,512),[[v,n.search.text]])]),s[2]||(s[2]=e("button",{class:"btn"},"Поиск",-1))],32)]),n.loading?(a(),r("div",M,s[4]||(s[4]=[e("span",{class:"loading loading-spinner text-primary"},null,-1)]))):d("",!0),!n.loading&&i.customersMap.length===0?(a(),r("div",A,[m(y,{class:"min-size-4 text-primary"}),s[5]||(s[5]=e("span",null,"На данный момент нет пользователей. Вернитесь позже",-1))])):d("",!0),!n.loading&&i.customersMap.length>0?(a(),r("div",C,[e("table",D,[s[6]||(s[6]=e("thead",null,[e("tr",null,[e("th",{class:"font-medium"},"ID"),e("th",{class:"font-medium"},"Chat ID"),e("th",{class:"font-medium"},"Логин"),e("th",{class:"font-medium"},"Email"),e("th",{class:"font-medium"},"Имя и фамилия")])],-1)),e("tbody",null,[(a(!0),r(p,null,w(i.customersMap,(t,g)=>(a(),r("tr",{key:g},[e("td",null,l(t.id),1),e("td",null,l(t.chat_id),1),e("td",null,[e("a",{class:"text-primary",href:`https://t.me/${t.username}`}," @"+l(t.username),9,V)]),e("td",null,[t.email?(a(),r("a",{key:0,class:"text-primary",href:`mailto:${t.email}`},l(t.email),9,N)):(a(),r("span",$,"—"))]),e("td",null,l(t.first_name)+" "+l(t.last_name),1)]))),128))])])])):d("",!0)],64)}const G=x(k,[["render",j]]);export{G as default};
