import{T as E,v as O}from"./transaction.service-DYMrOKFZ.js";import{_ as Y,a as z,b as F}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-CH8885Tq.js";import{_ as H,a as L,b as q,c as G,d as J,e as K}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DIJVFWeM.js";import{_ as Q,a as R,b as W,c as X,d as Z,e as aa,f as ea}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-CF3HXNgN.js";import{s as k}from"./transaction-D_hQjA16.js";import{g as ta}from"./allStatus-CybyXbRd.js";import{_ as w,c as l,o as n,e,F as p,i as b,q as d,t as c,f,g as m,w as u,r as o,n as na,b as i,j as sa,l as oa,ak as ia}from"./index-BeL3-aS9.js";import{_ as la,a as ra,b as ca,c as ua,d as ma,e as da}from"./PaginationPrevious.vue_vue_type_script_setup_true_lang-D6lPmlUH.js";import{_ as pa,a as ga,b as fa,c as _a,d as $a,e as va,f as ha}from"./SelectValue.vue_vue_type_script_setup_true_lang-BSKdQVPr.js";import"./utils-SVaxs_O8.js";import"./useTypeahead-D2N8t_hs.js";import"./index-BwWeqr07.js";const Pa={props:["data"],components:{Popover:F,PopoverContent:z,PopoverTrigger:Y,DropdownMenu:K,DropdownMenuContent:J,DropdownMenuItem:G,DropdownMenuLabel:q,DropdownMenuSeparator:L,DropdownMenuTrigger:H,Dialog:ea,DialogContent:aa,DialogDescription:Z,DialogFooter:X,DialogHeader:W,DialogTitle:R,DialogTrigger:Q},data:()=>({status:k,getOneStatusByValue:ta}),methods:{getOneStatus(t){const a=this.getOneStatusByValue(t);return a?a.class:""}}},ya={class:"overflow-x-auto"},Sa={class:"table table-sm"},ba={class:"text-xs opacity-55"};function Da(t,a,_,C,V,g){const $=o("router-link");return n(),l("div",ya,[e("table",Sa,[a[3]||(a[3]=e("thead",null,[e("tr",null,[e("th",{class:"font-medium"},"ID"),e("th",{class:"font-medium"},"Клиент"),e("th",{class:"font-medium"},"Специалист"),e("th",{class:"font-medium"},"Касса"),e("th",{class:"font-medium"},"Статус")])],-1)),e("tbody",null,[(n(!0),l(p,null,b(_.data,(s,y)=>(n(),l("tr",{key:y},[e("td",null,[d(c(t.$dayjs(s.created_at).format("DD-MM-YYYY HH:mm:ss"))+" ",1),a[0]||(a[0]=e("br",null,null,-1)),e("span",ba,c(s.id),1)]),e("td",null,[s.customer?(n(),f($,{key:0,class:"text-primary",to:`/admin/dashboard/chats?customer=${s.customer.id}`},{default:u(()=>[d(c(s.customer.username),1)]),_:2},1032,["to"])):m("",!0),a[1]||(a[1]=e("template",null,[d("-")],-1))]),e("td",null,[s.specialist?(n(),f($,{key:0,class:"text-primary",to:`/admin/dashboard/specialists/${s.specialist.id}`},{default:u(()=>{var v,h;return[d(c((v=s.specialist)==null?void 0:v.first_name)+" "+c((h=s.specialist)==null?void 0:h.last_name),1)]}),_:2},1032,["to"])):m("",!0),a[2]||(a[2]=e("template",null,[d("-")],-1))]),e("td",null,c(s.gateway),1),e("td",null,[e("span",{class:na(g.getOneStatus(s.status))},c(t.status(s.status).getStatusByValue.name),3)])]))),128))])])])}const ka=w(Pa,[["render",Da]]),wa={components:{Table:ka,Pagination:da,PaginationContent:ma,PaginationEllipsis:ua,PaginationItem:ca,PaginationNext:ra,PaginationPrevious:la,Select:ha,SelectContent:va,SelectGroup:$a,SelectItem:_a,SelectLabel:fa,SelectTrigger:ga,SelectValue:pa},directives:{debounce:O({lock:!0})},data:()=>({transactionService:new E,loading:!0,filtering:!1,transactions:null,status:k,filter:{status:"",search:""},pagination:{page:1,itemsPerPage:30,total:0}}),created(){this.getAll()},methods:{async getAll(){const t=await this.transactionService.getAll(this.filter,{page:this.pagination.page,limit:this.pagination.itemsPerPage});if(t){const{data:a,total:_}=t;this.transactions=a,this.pagination.total=_,this.loading=!1}},async onSearch(){this.filtering=!0,this.getAll(),this.filtering=!1},async handlePageChange(){this.filtering=!0,this.getAll(),this.filtering=!1}}},Ca={class:"flex"},Va={class:"flex gap-2 ml-auto"},Ta={key:0,class:"flex items-center"},Ia={class:"input border"},Ma={key:0,class:"flex justify-center"},xa={key:1,role:"alert",class:"alert"};function Ba(t,a,_,C,V,g){const $=o("SelectValue"),s=o("SelectTrigger"),y=o("SelectItem"),v=o("SelectContent"),h=o("Select"),D=o("Icon"),T=o("Table"),I=o("PaginationPrevious"),M=o("PaginationItem"),x=o("PaginationEllipsis"),B=o("PaginationNext"),N=o("PaginationContent"),A=o("Pagination"),U=ia("debounce");return n(),l(p,null,[e("div",Ca,[a[4]||(a[4]=e("div",{class:"flex gap-2 mb-10"},[e("h1",{class:"text-2xl font-semibold"},"Платежи")],-1)),e("div",Va,[t.filtering?(n(),l("div",Ta,a[3]||(a[3]=[e("span",{class:"loading loading-spinner text-primary w-4 h-4"},null,-1)]))):m("",!0),i(h,{modelValue:t.filter.status,"onUpdate:modelValue":[a[0]||(a[0]=r=>t.filter.status=r),g.onSearch]},{default:u(()=>[i(s,{class:"min-h-[40px]"},{default:u(()=>[i($,{placeholder:"Статус"})]),_:1}),i(v,null,{default:u(()=>[(n(!0),l(p,null,b(t.status().list,(r,S)=>(n(),f(y,{key:S,value:r.value},{default:u(()=>[d(c(r.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"]),e("label",Ia,[i(D,{name:"Search",size:16}),sa(e("input",{"onUpdate:modelValue":a[1]||(a[1]=r=>t.filter.search=r),type:"text",class:"grow",placeholder:"Поиск по id"},null,512),[[oa,t.filter.search],[U,g.onSearch,"500ms"]])])])]),t.loading?(n(),l("div",Ma,a[5]||(a[5]=[e("span",{class:"loading loading-spinner text-primary"},null,-1)]))):m("",!0),!t.loading&&t.transactions===null?(n(),l("div",xa,[i(D,{name:"Info",class:"min-size-4 text-primary"}),a[6]||(a[6]=e("span",null,"На данный момент нет отзывов. Вернитесь позже",-1))])):m("",!0),!t.loading&&t.transactions!==null?(n(),l(p,{key:2},[i(T,{data:t.transactions},null,8,["data"]),t.pagination.total>t.pagination.itemsPerPage?(n(),f(A,{key:0,page:t.pagination.page,"onUpdate:page":[a[2]||(a[2]=r=>t.pagination.page=r),g.handlePageChange],"items-per-page":t.pagination.itemsPerPage,total:t.pagination.total,"default-page":t.pagination.page},{default:u(({page:r})=>[i(N,null,{default:u(({items:S})=>[i(I,{class:"hover:bg-gray-200"}),(n(!0),l(p,null,b(S,(P,j)=>(n(),l(p,{key:j},[P.type==="page"?(n(),f(M,{key:0,value:P.value,"is-active":P.value===r,class:"hover:bg-gray-200"},{default:u(()=>[d(c(P.value),1)]),_:2},1032,["value","is-active"])):m("",!0)],64))),128)),i(x,{index:4}),i(B,{class:"hover:bg-gray-200"})]),_:2},1024)]),_:1},8,["page","items-per-page","total","default-page","onUpdate:page"])):m("",!0)],64)):m("",!0)],64)}const Ga=w(wa,[["render",Ba]]);export{Ga as default};
